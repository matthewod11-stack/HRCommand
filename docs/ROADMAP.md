# HR Command Center â€” Implementation Roadmap

> **Purpose:** Actionable checklist for implementation across multiple sessions.
> **Related Docs:** [SESSION_PROTOCOL.md](./SESSION_PROTOCOL.md) | [PROGRESS.md](./PROGRESS.md)
> **Full Spec:** [HR-Command-Center-Roadmap.md](../HR-Command-Center-Roadmap.md)

---

## Session Management

This is a **long-running, multi-session implementation**. Follow these rules:

### Before Each Session
```bash
./scripts/dev-init.sh
```

### Single-Feature-Per-Session Rule
> **CRITICAL:** Work on ONE checkbox item per session when possible. This prevents scope creep and ensures proper documentation.

### After Each Session
1. Run verification (build, type-check, tests)
2. Update PROGRESS.md with session entry
3. Update features.json status
4. Check off completed tasks below
5. Commit with descriptive message

---

## Phase Overview

| Phase | Focus | Status | Pause Points |
|-------|-------|--------|--------------|
| 0 | Pre-flight validation | âœ“ Complete | 0A: Tooling verified âœ“ |
| 1 | Foundation | âœ“ Complete | 1A: App runs, API works âœ“ |
| 2 | Context | âœ“ Complete | 2A: Context injection works âœ“ |
| 3 | Protection | âœ“ Complete | 3A: PII redaction works âœ“ |
| 4 | Polish | âœ“ Complete | 4A: Onboarding complete âœ“ |
| V2 | Intelligence & Visualization | **â† Current** | V2.1-V2.5: See below |
| 5 | Launch | Not started | 5A: Distribution, 5B: Beta ready |

---

## Phase 0: Pre-Flight Validation

**Goal:** Confirm tooling is ready and environment is set up

### Tasks
- [x] 0.1 Verify Rust toolchain installed (`rustc --version`) âœ“ 1.92.0
- [x] 0.2 Verify Node.js installed (`node --version`) âœ“ v22.21.0
- [x] 0.3 Verify Tauri CLI installed (`cargo tauri --version`) âœ“ 2.9.6
- [x] 0.4 Create empty Git repository with .gitignore
- [x] 0.5 Document environment versions in PROGRESS.md

### Pause Point 0A âœ“ COMPLETE
**Action Required:** Confirm all tooling works before proceeding â€” **VERIFIED**

---

## Phase 1: Foundation

**Goal:** App opens, stores data locally, talks to Claude

### 1.1 Project Scaffolding âœ“ COMPLETE
- [x] 1.1.1 Initialize Tauri + React + Vite project
- [x] 1.1.2 Configure TypeScript
- [x] 1.1.3 Set up Tailwind CSS with design tokens
- [x] 1.1.4 Create basic folder structure per architecture doc
- [x] 1.1.5 Verify `npm run dev` launches app window

### 1.2 SQLite Setup âœ“ COMPLETE
- [x] 1.2.1 Add SQLx dependency to Cargo.toml
- [x] 1.2.2 Create initial migration (employees, conversations, company, settings, audit_log)
- [x] 1.2.3 Create FTS virtual table for conversation search
- [x] 1.2.4 Implement db.rs with connection management
- [x] 1.2.5 Verify database creates on first launch

### 1.3 Basic Chat UI âœ“ COMPLETE
- [x] 1.3.1 Create AppShell component (main layout)
- [x] 1.3.2 Create ChatInput component
- [x] 1.3.3 Create MessageBubble component (user/assistant variants)
- [x] 1.3.4 Create MessageList component with scroll
- [x] 1.3.5 Create TypingIndicator component
- [x] 1.3.6 Wire up basic message send/display flow

### 1.4 Claude API Integration
- [x] 1.4.1 Add keyring dependency for macOS Keychain
- [x] 1.4.2 Implement keyring.rs for API key storage
- [x] 1.4.3 Create ApiKeyInput component with validation
- [x] 1.4.4 Implement chat.rs with Claude API call
- [x] 1.4.5 Add response streaming support
- [x] 1.4.6 Wire frontend to backend via Tauri invoke

### 1.5 Network Detection âœ“ COMPLETE
- [x] 1.5.1 Implement network check in Rust
- [x] 1.5.2 Create useNetwork hook in React
- [x] 1.5.3 Show offline indicator when disconnected

### Pause Point 1A âœ“ VERIFIED
**Verification Required:**
- [x] App window opens
- [x] Can enter API key (validates against Claude)
- [x] Can send message and receive streamed response
- [x] Messages persist in SQLite
- [x] Network status displays correctly

---

## Phase 2: Context

**Goal:** Claude knows about your company and remembers past conversations

### 2.1 Employee & Performance Data
> **Expanded Scope:** Full HR Suite schema with performance ratings, reviews, eNPS, and demographics.
> **Reference:** [SCHEMA_EXPANSION_V1.md](./SCHEMA_EXPANSION_V1.md)

#### 2.1.A Schema & Backend
- [x] 2.1.1 Create migration 002_performance_enps.sql (new tables + employee fields)
- [x] 2.1.2 Update employees.rs with demographics + termination fields
- [x] 2.1.3 Create review_cycles.rs CRUD operations
- [x] 2.1.4 Create performance_ratings.rs CRUD operations
- [x] 2.1.5 Create performance_reviews.rs CRUD operations (+ FTS triggers)
- [x] 2.1.6 Create enps.rs CRUD operations

#### 2.1.B File Ingestion
- [x] 2.1.7 Add calamine dependency for Excel parsing
- [x] 2.1.8 Create unified file parser (CSV, XLSX, TSV)
- [x] 2.1.9 Create FileDropzone component (multi-format)
- [x] 2.1.10 Implement employee import with merge-by-email
- [x] 2.1.11 Implement performance ratings import
- [x] 2.1.12 Implement performance reviews import
- [x] 2.1.13 Implement eNPS import

#### 2.1.C UI Components âœ“ COMPLETE
- [x] 2.1.14 Create EmployeePanel component (sidebar with performance summary)
- [x] 2.1.15 Create EmployeeDetail component (full profile view)
- [x] 2.1.16 Create EmployeeEdit component (modal)
- [x] 2.1.17 Create ImportWizard component (guides through data import)

#### 2.1.D Test Data
> **Implementation Plan:** [PLAN_2.1.D_TEST_DATA.md](./PLAN_2.1.D_TEST_DATA.md)
> **Sessions Required:** 2-3 | **Est. LOC:** ~1,050 TypeScript

- [x] 2.1.18 Create test data generator script infrastructure
- [x] 2.1.19 Generate "Acme Corp" dataset (100 employees)
- [x] 2.1.20 Generate 3 review cycles with ratings + reviews
- [x] 2.1.21 Generate 3 eNPS survey responses per employee

### 2.2 Company Profile âœ“ COMPLETE
- [x] 2.2.1 Create CompanySetup component
- [x] 2.2.2 Implement company table operations
- [x] 2.2.3 Require name + state during onboarding
- [x] 2.2.4 Store company data in SQLite

### 2.3 Context Builder
> **Reference:** [HR_PERSONA.md](./HR_PERSONA.md) for Claude's HR leader persona

- [x] 2.3.1 Implement context.rs with retrieval logic
- [x] 2.3.2 Add employee name/department extraction from query
- [x] 2.3.3 Build system prompt with HR persona ("Alex") + company context
- [x] 2.3.4 Include performance/eNPS data in employee context
- [x] 2.3.5 Add context to Claude API calls (+ user_name setting support)
- [x] 2.3.6 Implement context size trimming

### 2.4 Cross-Conversation Memory âœ“ COMPLETE
- [x] 2.4.1 Implement memory.rs for conversation summaries
- [x] 2.4.2 Generate summaries after conversations (frontend trigger)
- [x] 2.4.3 Implement summary search/retrieval
- [x] 2.4.4 Include relevant memories in context

### 2.5 Conversation Management âœ“ COMPLETE
- [x] 2.5.1 Create ConversationSidebar component
- [x] 2.5.2 Implement auto-title generation
- [x] 2.5.3 Create ConversationSearch component (FTS)
- [x] 2.5.4 Add "New conversation" action
- [x] 2.5.5 Wire sidebar to chat area

### 2.6 Stickiness Features + UI Polish
> **Implementation Plan:** `~/.claude/plans/silly-splashing-eagle.md`

#### UI Polish (from testing feedback)
- [x] 2.6.0a Add react-markdown for chat message rendering
- [x] 2.6.0b Fix email overflow in EmployeeDetail
- [x] 2.6.0c Show manager name instead of ID
- [x] 2.6.0d Make eNPS/review tiles expandable (modal)
- [x] 2.6.0e Add department and manager filters to EmployeePanel

#### Stickiness Features
- [x] 2.6.1 Create PromptSuggestions component
- [x] 2.6.2 Implement contextual prompt generation
- [x] 2.6.3 Create empty state guidance

### 2.7 Context Scaling (Query-Adaptive)
> **Architecture Doc:** [CONTEXT_SCALING_ARCHITECTURE.md](./CONTEXT_SCALING_ARCHITECTURE.md)
> **Problem:** Current 10-employee limit prevents accurate aggregate queries at scale

- [x] 2.7.0 Pass selected_employee_id from UI to context builder (prioritize selected employee)
- [x] 2.7.1 Add OrgAggregates struct and build_org_aggregates() SQL queries
- [x] 2.7.2 Implement QueryType enum and classify_query() function
- [x] 2.7.3 Refactor build_chat_context() for query-adaptive retrieval
- [x] 2.7.4 Update format functions and system prompt with aggregates
- [x] 2.7.5 Add unit tests for classification and aggregates

### Pause Point 2A âœ“ VERIFIED
**Verification Required:**
- [x] Can import employee CSV/Excel and see employees with demographics
- [x] Can import performance ratings and reviews
- [x] Can import eNPS survey data
- [x] Can edit individual employee
- [x] Asking "Who's been here longest?" returns correct answer
- [x] Asking "Who's underperforming?" uses ratings data
- [x] Asking "What's our eNPS?" calculates correctly
- [x] Asking about employee by name includes their performance context
- [x] Conversation sidebar shows history
- [x] Search finds past conversations
- [x] Memory references past discussions naturally

---

## Phase 3: Protection

**Goal:** Users can't accidentally leak sensitive data

### 3.1 PII Scanner âœ“ COMPLETE
- [x] 3.1.1 Implement pii.rs with regex patterns
- [x] 3.1.2 Add SSN detection (XXX-XX-XXXX, XXXXXXXXX)
- [x] 3.1.3 Add credit card detection
- [x] 3.1.4 Add bank account detection (with context)
- [x] 3.1.5 Create unit tests for PII patterns

### 3.2 Auto-Redaction âœ“ COMPLETE
- [x] 3.2.1 Implement scan_and_redact function
- [x] 3.2.2 Replace PII with placeholders ([SSN_REDACTED], etc.)
- [x] 3.2.3 Return redaction list for notification

### 3.3 Notification UI âœ“ COMPLETE
- [x] 3.3.1 Create PIINotification component
- [x] 3.3.2 Show brief notification on redaction
- [x] 3.3.3 Auto-dismiss after 3 seconds

### 3.4 Audit Logging âœ“ COMPLETE
- [x] 3.4.1 Implement audit.rs
- [x] 3.4.2 Log redacted requests and responses
- [x] 3.4.3 Store context employee IDs used
- [x] 3.4.4 Add audit log export capability

### 3.5 Error Handling âœ“ COMPLETE
- [x] 3.5.1 Create ErrorMessage component
- [x] 3.5.2 Handle API errors gracefully (categorization + user-friendly messages)
- [x] 3.5.3 Show "Retry" and "Copy Message" actions
- [x] 3.5.4 Implement read-only offline mode (ChatInput disabled when offline)

### Pause Point 3A âœ“ VERIFIED
**Verification Required:**
- [x] Pasting SSN auto-redacts before sending
- [x] Notification shows briefly
- [x] Audit log captures redacted content
- [x] Offline mode allows browsing but not chatting
- [x] API errors show friendly messages

---

## Phase 4: Polish

**Goal:** Feels like a real product

### 4.1 Onboarding Flow âœ“ COMPLETE
> **Implementation Plan:** `~/.claude/plans/snazzy-bubbling-boole.md`
> **Completed:** ~1,100 LOC | 11 new files | 1 session

- [x] 4.1.1 Create OnboardingContext.tsx (state + persistence)
- [x] 4.1.2 Create OnboardingFlow.tsx + StepIndicator.tsx
- [x] 4.1.3 Step 1: WelcomeStep.tsx
- [x] 4.1.4 Step 2: ApiKeyStep.tsx (wraps ApiKeyInput)
- [x] 4.1.5 Step 3: CompanyStep.tsx (wraps CompanySetup)
- [x] 4.1.6 Step 4: EmployeeImportStep.tsx (auto-loads sample data)
- [x] 4.1.7 Step 5: DisclaimerStep.tsx
- [x] 4.1.8 Step 6: TelemetryStep.tsx
- [x] 4.1.9 Step 7: FirstPromptStep.tsx
- [x] 4.1.10 App.tsx integration (replace ChatArea gating)

### 4.2 Settings Panel âœ“ COMPLETE
> **Implementation Plan:** `~/.claude/plans/cozy-crafting-metcalfe.md`
> **Completed:** ~200 LOC | 6 files | 1 session

- [x] 4.2.1 Create SettingsPanel component
- [x] 4.2.2 API key management (change/remove)
- [x] 4.2.3 Company profile editing
- [x] 4.2.4 Data location display
- [x] 4.2.5 Telemetry toggle

### Pause Point 4A (Onboarding + Settings) âœ“ VERIFIED
**Verification Required:**
- [x] Fresh install goes through 7-step onboarding smoothly
- [x] Onboarding resumes correctly if exited mid-flow
- [x] Sample data auto-loads on employee import step
- [x] Disclaimer checkbox required before continuing
- [x] Telemetry preference persists
- [x] Settings panel opens from main app
- [x] Can change/remove API key from settings
- [x] Can edit company profile from settings
- [x] Data location displays correctly

### 4.3 Data Export/Import âœ“ COMPLETE
> **Implementation Plan:** `~/.claude/plans/delegated-sleeping-stardust.md`
> **Completed:** ~800 LOC Rust + ~280 LOC TypeScript/React | AES-256-GCM encryption | Full backup of all 9 tables

- [x] 4.3.1 Implement encrypted data export
- [x] 4.3.2 Implement data import from backup
- [x] 4.3.3 Add export/import to Settings panel

### 4.4 Monday Digest âœ“ COMPLETE
> **Completed:** ~330 LOC | 8 files | 1 session

- [x] 4.4.1 Create MondayDigest component
- [x] 4.4.2 Query anniversaries from hire_date
- [x] 4.4.3 Query new hires (<90 days)
- [x] 4.4.4 Show on Monday mornings, dismissible

### Phase 4 Complete âœ“

**Status:** All Phase 4 tasks complete. Pausing to review V2 features before launch.

---

## Phase V2: Intelligence & Visualization

**Goal:** Transform the app from Q&A tool into an HR intelligence platform with visual analytics, proactive signals, and structured data extraction.

> **Philosophy:** Each feature amplifies the others. Structured data extraction powers signals; signals visualize on org charts; charts persist to insight canvases.

---

### V2.1 Quick Wins (Low Complexity)

Quick polish features that improve UX without architectural changes.

#### V2.1.1 API Key Setup Guide (Enhanced) âœ“ COMPLETE
> **Impact:** ðŸ”¥ High | **Completed:** 1 session

Plain-English onboarding for non-technical HR users.

- [x] V2.1.1a Add "What is an API key?" explainer with plain language
- [x] V2.1.1b Add step-by-step guide (account â†’ billing â†’ key â†’ paste)
- [x] V2.1.1c Add inline key validation with error-specific guidance
- [x] V2.1.1d Add usage cost estimator ("~$5-15/month for typical use")
- [x] V2.1.1e Add troubleshooting tips for common errors

#### V2.1.2 Command Palette + Keyboard Shortcuts âœ“ COMPLETE
> **Impact:** âš¡ Medium | **Completed:** 1 session

Power user polish with discoverability.

- [x] V2.1.2a Create CommandPalette component (`Cmd+K`)
- [x] V2.1.2b Add fuzzy search across actions, conversations, employees
- [x] V2.1.2c Implement core shortcuts: `Cmd+N` (new), `Cmd+/` (focus), `Cmd+E` (employees), `Cmd+,` (settings)
- [x] V2.1.2d Show keyboard hints in palette and menus

#### V2.1.3 Persona Switcher
> **Impact:** âš¡ Medium | **Est. Sessions:** 1

Pre-built HR personas for different organizational styles.

- [ ] V2.1.3a Create persona definitions (Alex, Jordan, Sam, Morgan, Taylor)
- [ ] V2.1.3b Add persona selector in Settings panel
- [ ] V2.1.3c Create persona preview cards with tone samples
- [ ] V2.1.3d Wire selected persona to system prompt

**Personas:**
| Persona | Style | Best For |
|---------|-------|----------|
| Alex (default) | Warm, practical | General HR leadership |
| Jordan | Formal, compliance-focused | Regulated industries |
| Sam | Startup-friendly, direct | Early-stage, lean HR |
| Morgan | Data-driven, analytical | Metrics-focused users |
| Taylor | Employee-advocate, empathetic | People-first cultures |

#### V2.1.4 Answer Verification Mode
> **Impact:** âš¡ Medium | **Est. Sessions:** 1

Trust but verify numeric answers.

- [ ] V2.1.4a Detect numeric questions (headcount, averages, percentages)
- [ ] V2.1.4b Run parallel SQL query for ground truth
- [ ] V2.1.4c Display verification badge (âœ“ Verified / âš ï¸ Check)
- [ ] V2.1.4d Add "Show SQL" option for transparency

### Pause Point V2.1
**Verification Required:**
- [ ] Non-technical user can complete API key setup with guide
- [ ] `Cmd+K` opens palette with searchable actions
- [ ] Can switch personas and see different response tones
- [ ] Numeric answers show verification badges

---

### V2.2 Data Intelligence Pipeline

Foundation layer that powers visualization and signals features.

#### V2.2.1 Structured Data Extraction (Review Highlights Pipeline)
> **Impact:** ðŸ”¥ High | **Est. Sessions:** 2-3

Extract structured entities from performance reviews, turning prose into computable data.

- [ ] V2.2.1a Design extraction schema (strengths, opportunities, quotes, sentiment)
- [ ] V2.2.1b Create extraction pipeline (runs on review import)
- [ ] V2.2.1c Store extracted data in new `review_highlights` table
- [ ] V2.2.1d Create employee profile summaries (aggregate career narrative)
- [ ] V2.2.1e Add cache invalidation on review add/edit
- [ ] V2.2.1f Update context builder to use highlights instead of full reviews

**Extraction Schema:**
```json
{
  "strengths": ["Project leadership", "Mentoring junior devs"],
  "opportunities": ["Meeting deadlines", "Public speaking"],
  "quotes": [
    { "sentiment": "positive", "text": "Sarah was instrumental in the v2 launch..." }
  ],
  "themes": ["leadership", "technical-growth", "communication"]
}
```

**Why This Matters:** Enables sophisticated queries like "Show me all engineers who received feedback about 'meeting deadlines'" and powers Attrition Signals (#V2.4.1) with structured data instead of raw text sentiment.

#### V2.2.2 Query-Adaptive Retrieval v2
> **Impact:** âš¡ Medium | **Est. Sessions:** 2

Enhance V1's query classification with smarter context selection.

- [ ] V2.2.2a Add dynamic excerpting for long content (pull relevant sentences)
- [ ] V2.2.2b Implement theme-based retrieval ("common concerns" â†’ mine themes)
- [ ] V2.2.2c Add measurable token budgets by query type
- [ ] V2.2.2d Add retrieval metrics (track what context was used)

### Pause Point V2.2
**Verification Required:**
- [ ] Imported reviews generate structured highlights
- [ ] Can query by extracted themes ("who has leadership feedback?")
- [ ] Employee profiles show aggregated career narrative
- [ ] Long reviews don't blow token budgets

---

### V2.3 Visualization Layer

Visual analytics that transforms answers into artifacts.

#### V2.3.1 Org Chart View + Heatmap Overlay
> **Impact:** ðŸ”¥ High | **Est. Sessions:** 3-4

Interactive hierarchy visualization with signal overlays.

**Core Org Chart:**
- [ ] V2.3.1a Create OrgChart component with tree visualization
- [ ] V2.3.1b Implement expand/collapse for direct reports
- [ ] V2.3.1c Add click-to-select (syncs with People panel)
- [ ] V2.3.1d Add search/filter within tree
- [ ] V2.3.1e Add zoom/pan for large orgs
- [ ] V2.3.1f Add department color coding

**Heatmap Overlay (connects to Attrition Signals):**
- [ ] V2.3.1g Create "attention score" composite calculation
- [ ] V2.3.1h Implement heatmap coloring by team/department
- [ ] V2.3.1i Add click-to-drill into anonymized themes
- [ ] V2.3.1j Add overlay toggle (off by default)

**Attention Score Factors:**
- High turnover (YTD terminations / headcount)
- Low eNPS (team average below org average)
- Negative review themes (from V2.2.1 extraction)

#### V2.3.2 Interactive Analytics Panel + Insight Canvas
> **Impact:** ðŸ”¥ Very High | **Est. Sessions:** 5-6

Natural language â†’ charts with persistent insights.

**Core Analytics Panel:**
- [ ] V2.3.2a Design analytics request schema (intent + filters + grouping)
- [ ] V2.3.2b Create whitelisted NLâ†’SQL templates (safe, deterministic)
- [ ] V2.3.2c Implement chart rendering (bar, pie, line)
- [ ] V2.3.2d Add "Filters applied" caption for explainability
- [ ] V2.3.2e Add graceful fallback to text for non-chartable queries
- [ ] V2.3.2f Wire Claude to emit structured analytics requests

**Insight Canvas (persistent workspace):**
- [ ] V2.3.2g Create InsightCanvas component (persistent chart storage)
- [ ] V2.3.2h Add "Pin to Canvas" action from analytics panel
- [ ] V2.3.2i Create named boards ("Q3 Review", "Leadership Dashboard")
- [ ] V2.3.2j Add chart annotation capability
- [ ] V2.3.2k Add 1-page report export (combine pinned charts)
- [ ] V2.3.2l Add drilldown from chart â†’ employee list

**Technical Contract (Keep It Deterministic):**
- Claude emits **structured analytics request** (intent + filters + grouping)
- Rust runs deterministic SQLite query, returns **dataset + applied filters**
- React renders from **chart spec + dataset**
- Never let Claude generate numbers â€” source all aggregates from SQL

**Example Queries:**
- "Show me employee breakdown by department" â†’ pie chart
- "Compare marketing vs sales headcount over time" â†’ line chart
- "What's the gender breakdown on engineering?" â†’ bar chart, pinnable

### Pause Point V2.3
**Verification Required:**
- [ ] Org chart renders full hierarchy from manager_id relationships
- [ ] Can navigate tree, expand/collapse branches
- [ ] Heatmap overlay shows team "attention scores"
- [ ] Natural language query generates appropriate chart
- [ ] Can pin chart to named board
- [ ] Can export board as 1-page report

---

### V2.4 Intelligence Layer

Proactive insights with appropriate guardrails.

#### V2.4.1 Attrition & Sentiment Signals
> **Impact:** ðŸ”¥ High | **Est. Sessions:** 2-3
> **Depends on:** V2.2.1 (Structured Extraction), V2.3.1 (Org Chart Heatmap)

Systemic risk identification with strong disclaimers.

- [ ] V2.4.1a Define heuristic risk flags (tenure + performance + eNPS composite)
- [ ] V2.4.1b Create theme mining from extracted review data
- [ ] V2.4.1c Implement team-level aggregation (never individual predictions)
- [ ] V2.4.1d Add "Attention Areas" summary in analytics panel
- [ ] V2.4.1e Wire to Org Chart heatmap overlay
- [ ] V2.4.1f Add opt-in toggle in Settings
- [ ] V2.4.1g Add prominent disclaimers ("heuristic, not prediction")

**Guardrails:**
- Show patterns, not "John will leave"
- Require opt-in to enable
- Explain which factors contributed
- All outputs are team-level, anonymized

#### V2.4.2 DEI & Fairness Lens
> **Impact:** âš¡ Medium | **Est. Sessions:** 3-4
> **Depends on:** V2.2.1 (Structured Extraction)

Representation analysis with appropriate guardrails.

- [ ] V2.4.2a Create representation breakdown queries (gender/ethnicity by dept/level)
- [ ] V2.4.2b Add rating distribution analysis by demographic group
- [ ] V2.4.2c Implement promotion delta tracking
- [ ] V2.4.2d Add small-n suppression (hide groups <5)
- [ ] V2.4.2e Add bias disclaimers ("data may reflect historical bias")
- [ ] V2.4.2f Add DEI query audit trail

### Pause Point V2.4
**Verification Required:**
- [ ] Team-level attention signals appear on org chart
- [ ] Clicking team shows anonymized theme drilldown
- [ ] DEI breakdown queries work with small-n suppression
- [ ] All signals show appropriate disclaimers

---

### V2.5 Import/Export Enhancements

Better data quality and workflow.

#### V2.5.1 Data Quality Center
> **Impact:** ðŸ”¥ High | **Est. Sessions:** 2-3

Pre-import validation and fix workflow.

- [ ] V2.5.1a Create column mapping UI (visual drag-drop)
- [ ] V2.5.1b Add header normalization preview
- [ ] V2.5.1c Implement dedupe detection (email + name/DOB)
- [ ] V2.5.1d Add validation rules (missing managers, invalid dates)
- [ ] V2.5.1e Create "fix-and-retry" workflow (edit issues in-app)
- [ ] V2.5.1f Add HRIS-specific header mappings (BambooHR, Gusto, etc.)

**Ties to Known Issue:** Fixes `file_parser::tests::test_normalize_header` by strengthening normalization rules.

### Pause Point V2.5 (Phase V2 Complete)
**Verification Required:**
- [ ] Can map arbitrary CSV columns to fields visually
- [ ] Duplicates detected and highlighted before import
- [ ] Can fix validation errors in-app before committing
- [ ] BambooHR export imports with auto-detected columns

---

## Phase 5: Launch

**Goal:** Real users, real feedback

### 5.1 Distribution
- [ ] 5.1.1 Create app icon
- [ ] 5.1.2 Configure macOS code signing
- [ ] 5.1.3 Configure notarization
- [ ] 5.1.4 Set up tauri-plugin-updater
- [ ] 5.1.5 Configure GitHub Releases for updates

### Pause Point 5A (Distribution)
**Verification Required:**
- [ ] Can export and re-import data
- [ ] Monday digest appears with correct data
- [ ] App is signed and notarized
- [ ] Auto-update works

### 5.2 License System
- [ ] 5.2.1 Create license validation API endpoint
- [ ] 5.2.2 Implement license check in app
- [ ] 5.2.3 Store validation locally after success
- [ ] 5.2.4 Add license input to onboarding

### 5.3 Payment Integration
- [ ] 5.3.1 Set up Stripe product ($99)
- [ ] 5.3.2 Create checkout flow on website
- [ ] 5.3.3 Implement license key generation
- [ ] 5.3.4 Set up email delivery of keys

### 5.4 Landing Page
- [ ] 5.4.1 Update hrcommandcenter.com
- [ ] 5.4.2 Add download links
- [ ] 5.4.3 Add purchase button

### 5.5 Beta Distribution
- [ ] 5.5.1 Identify 5-10 beta users
- [ ] 5.5.2 Distribute beta builds
- [ ] 5.5.3 Set up feedback collection (in-app button)
- [ ] 5.5.4 Triage and prioritize feedback

### Pause Point 5B (Launch Ready)
**Verification Required:**
- [ ] Payment flow works end-to-end
- [ ] License validation works
- [ ] Beta users successfully using product
- [ ] Critical feedback addressed

---

## Linear Checklist (All Tasks)

Copy this to external tracking if needed:

```
PHASE 0 - PRE-FLIGHT
[ ] 0.1 Verify Rust
[ ] 0.2 Verify Node
[ ] 0.3 Verify Tauri CLI
[ ] 0.4 Create Git repo
[ ] 0.5 Document versions
[ ] PAUSE 0A: Tooling verified

PHASE 1 - FOUNDATION
[ ] 1.1.1-1.1.5 Project scaffolding (5 tasks)
[ ] 1.2.1-1.2.5 SQLite setup (5 tasks)
[ ] 1.3.1-1.3.6 Basic chat UI (6 tasks)
[ ] 1.4.1-1.4.6 Claude API integration (6 tasks)
[ ] 1.5.1-1.5.3 Network detection (3 tasks)
[ ] PAUSE 1A: App runs, API works

PHASE 2 - CONTEXT
[ ] 2.1.1-2.1.6 Employee data (6 tasks)
[ ] 2.2.1-2.2.4 Company profile (4 tasks)
[ ] 2.3.1-2.3.5 Context builder (5 tasks)
[ ] 2.4.1-2.4.4 Cross-conversation memory (4 tasks)
[ ] 2.5.1-2.5.5 Conversation management (5 tasks)
[ ] 2.6.1-2.6.3 Stickiness features (3 tasks)
[ ] PAUSE 2A: Context injection works

PHASE 3 - PROTECTION
[ ] 3.1.1-3.1.5 PII scanner (5 tasks)
[ ] 3.2.1-3.2.3 Auto-redaction (3 tasks)
[ ] 3.3.1-3.3.3 Notification UI (3 tasks)
[ ] 3.4.1-3.4.4 Audit logging (4 tasks)
[ ] 3.5.1-3.5.4 Error handling (4 tasks)
[ ] PAUSE 3A: PII redaction works

PHASE 4 - POLISH âœ“ COMPLETE
[x] 4.1.1-4.1.10 Onboarding flow (10 tasks)
[x] 4.2.1-4.2.5 Settings panel (5 tasks)
[x] 4.3.1-4.3.3 Data export/import (3 tasks)
[x] 4.4.1-4.4.4 Monday digest (4 tasks)
[x] PAUSE 4A: Onboarding complete

PHASE V2 - INTELLIGENCE & VISUALIZATION
[ ] V2.1.1a-e API Key Guide (5 tasks)
[ ] V2.1.2a-d Command Palette (4 tasks)
[ ] V2.1.3a-d Persona Switcher (4 tasks)
[ ] V2.1.4a-d Answer Verification (4 tasks)
[ ] PAUSE V2.1: Quick Wins verified
[ ] V2.2.1a-f Structured Data Extraction (6 tasks)
[ ] V2.2.2a-d Query-Adaptive Retrieval v2 (4 tasks)
[ ] PAUSE V2.2: Data Intelligence Pipeline verified
[ ] V2.3.1a-j Org Chart + Heatmap (10 tasks)
[ ] V2.3.2a-l Analytics Panel + Insight Canvas (12 tasks)
[ ] PAUSE V2.3: Visualization Layer verified
[ ] V2.4.1a-g Attrition & Sentiment Signals (7 tasks)
[ ] V2.4.2a-f DEI & Fairness Lens (6 tasks)
[ ] PAUSE V2.4: Intelligence Layer verified
[ ] V2.5.1a-f Data Quality Center (6 tasks)
[ ] PAUSE V2.5: Phase V2 Complete

PHASE 5 - LAUNCH
[ ] 5.1.1-5.1.5 Distribution (5 tasks)
[ ] PAUSE 5A: Distribution verified
[ ] 5.2.1-5.2.4 License system (4 tasks)
[ ] 5.3.1-5.3.4 Payment integration (4 tasks)
[ ] 5.4.1-5.4.3 Landing page (3 tasks)
[ ] 5.5.1-5.5.4 Beta distribution (4 tasks)
[ ] PAUSE 5B: Launch ready
```

**Total: ~165 discrete tasks across 6 phases (0-4 + V2 + 5)**

---

*Last updated: December 2025*
*Session tracking: See PROGRESS.md*
